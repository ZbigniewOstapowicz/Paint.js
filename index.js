!function(t){var s={};function i(e){if(s[e])return s[e].exports;var c=s[e]={i:e,l:!1,exports:{}};return t[e].call(c.exports,c,c.exports,i),c.l=!0,c.exports}i.m=t,i.c=s,i.d=function(t,s,e){i.o(t,s)||Object.defineProperty(t,s,{enumerable:!0,get:e})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,s){if(1&s&&(t=i(t)),8&s)return t;if(4&s&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(i.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&s&&"string"!=typeof t)for(var c in t)i.d(e,c,function(s){return t[s]}.bind(null,c));return e},i.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(s,"a",s),s},i.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},i.p="",i(i.s=0)}([function(t,s,i){"use strict";i.r(s);var e=class{constructor(t,s,i,e){this.canvas=t,this.canvas2=i,this.ctx=s,this.ctx2=e,this.rect=null,this.controls(),this.setupInit(),this.handelControls()}setupInit(){this.ctx.lineJoin="round",this.ctx.lineCap="round",this.lineWidthEle.value=3,this.ctx.lineWidth=this.lineWidthEle.value,this.sizeElemVal.innerText=this.lineWidthEle.value,this.draw()}controls(){this.lineWidthEle=document.querySelector(".paint-size"),this.sizeElemVal=document.querySelector(".paint-size-val"),this.sizeElemVal.innerText=this.lineWidthEle.value,this.lineColorEle=document.querySelector("#color")}handelControls(){this.lineWidthEle.addEventListener("input",t=>{this.sizeElemVal.innerText=t.target.value}),this.lineWidthEle.addEventListener("change",t=>{this.ctx.lineWidth=t.target.value}),this.lineColorEle.addEventListener("change",t=>{this.ctx.strokeStyle=t.target.value}),window.onresize=()=>{this.setupInit()},document.querySelector('[data-js="clear"]').addEventListener("click",()=>{this.clearCanvas()}),document.querySelector('[data-js="saveFile"]').addEventListener("click",()=>{this.saveCnavas()}),document.querySelector('[data-js="openFile"]').addEventListener("change",()=>{this.openFile()}),this.buttons=document.querySelectorAll(".btn"),this.buttons.forEach(t=>{t.addEventListener("click",s=>{t.classList.contains("draw")?(t.classList.add("active"),this.draw()):t.classList.contains("drawLine")?(t.classList.add("active"),this.drawLine()):t.classList.contains("drawRect")?(t.classList.add("active"),this.drawRectangel()):t.classList.contains("drawCircel")?(t.classList.add("active"),this.drawCircel()):t.classList.contains("drawTriangel")?(t.classList.add("active"),this.drawTriangel()):t.classList.contains("fill")&&(t.classList.add("active"),this.fillElement());for(const t of this.buttons)t!=s.currentTarget&&t.classList.remove("active")})})}cursorStyle(t){this.canvas.style.cursor=t}positionStart(t){this.rect={},this.rect.x0=t.offsetX,this.rect.y0=t.offsetY}positionEnd(t){this.rect.x1=t.offsetX,this.rect.y1=t.offsetY}positionMobileStart(t){this.rect={},this.rect.correction=this.canvas.getBoundingClientRect(),this.rect.x0=t.touches[0].pageX-this.rect.correction.x,this.rect.y0=t.touches[0].pageY-this.rect.correction.y}positionMobileEnd(t){this.rect.x1=t.touches[0].pageX-this.rect.correction.x,this.rect.y1=t.touches[0].pageY-this.rect.correction.y}draw(){this.cursorStyle("url('./img/Pencil.png') 2 29, auto"),this.canvas.ontouchstart=t=>{this.positionMobileStart(t),this.ctx.beginPath(),this.ctx.moveTo(this.rect.x0,this.rect.y0)},this.canvas.onmousedown=t=>{this.positionStart(t),this.ctx.beginPath(),this.ctx.moveTo(this.rect.x0,this.rect.y0)},this.canvas.ontouchmove=t=>{t.preventDefault(),this.positionMobileEnd(t),this.rect&&(this.positionMobileEnd(t),this.ctx.lineTo(this.rect.x1,this.rect.y1),this.ctx.stroke())},this.canvas.onmousemove=t=>{this.rect&&(this.positionEnd(t),this.ctx.lineTo(this.rect.x1,this.rect.y1),this.ctx.stroke())},this.canvas.onmouseup=t=>{this.ctx2.drawImage(this.canvas,0,0),this.rect=null},this.canvas.ontouchend=t=>{this.ctx2.drawImage(this.canvas,0,0),this.rect=null}}drawLine(){this.cursorStyle("crosshair"),this.canvas.ontouchstart=t=>{this.positionMobileStart(t)},this.canvas.onmousedown=t=>{this.positionStart(t)},this.canvas.ontouchmove=t=>{t.preventDefault(),this.rect&&(this.positionMobileEnd(t),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.beginPath(),this.ctx.moveTo(this.rect.x0,this.rect.y0),this.ctx.lineTo(this.rect.x1,this.rect.y1),this.ctx.closePath(),this.ctx.stroke())},this.canvas.onmousemove=t=>{this.rect&&(this.positionEnd(t),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.beginPath(),this.ctx.moveTo(this.rect.x0,this.rect.y0),this.ctx.lineTo(this.rect.x1,this.rect.y1),this.ctx.closePath(),this.ctx.stroke())},this.canvas.ontouchend=t=>{this.ctx2.drawImage(this.canvas,0,0),this.rect=null},this.canvas.onmouseup=t=>{this.ctx2.drawImage(this.canvas,0,0),this.rect=null}}drawRectangel(){this.cursorStyle("crosshair"),this.canvas.ontouchstart=t=>{this.positionMobileStart(t),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.beginPath()},this.canvas.onmousedown=t=>{this.positionStart(t),this.ctx.beginPath()},this.canvas.ontouchmove=t=>{t.preventDefault(),this.rect&&(this.positionMobileEnd(t),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.beginPath(),this.ctx.strokeRect(this.rect.x0,this.rect.y0,this.rect.x1-this.rect.x0,this.rect.y1-this.rect.y0),this.ctx.moveTo(this.rect.x0,this.rect.y0),this.ctx.lineTo(this.rect.x1,this.rect.y1),this.ctx.closePath())},this.canvas.onmousemove=t=>{this.rect&&(this.positionEnd(t),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.beginPath(),this.ctx.strokeRect(this.rect.x0,this.rect.y0,this.rect.x1-this.rect.x0,this.rect.y1-this.rect.y0),this.ctx.moveTo(this.rect.x0,this.rect.y0),this.ctx.lineTo(this.rect.x1,this.rect.y1),this.ctx.closePath())},this.canvas.ontouchend=t=>{this.ctx2.drawImage(this.canvas,0,0),this.rect=null},this.canvas.onmouseup=t=>{this.ctx2.drawImage(this.canvas,0,0),this.rect=null}}drawCircel(){this.cursorStyle("crosshair"),this.canvas.ontouchstart=t=>{this.positionMobileStart(t)},this.canvas.onmousedown=t=>{this.positionStart(t)},this.canvas.ontouchmove=t=>{t.preventDefault(),this.rect&&(this.positionMobileEnd(t),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.beginPath(),this.ctx.arc(this.rect.x0,this.rect.y0,Math.abs(this.rect.x1-this.rect.x0),0,2*Math.PI),this.ctx.stroke(),this.ctx.closePath())},this.canvas.onmousemove=t=>{this.rect&&(this.positionEnd(t),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.beginPath(),this.ctx.arc(this.rect.x0,this.rect.y0,Math.abs(this.rect.x1-this.rect.x0),0,2*Math.PI),this.ctx.stroke(),this.ctx.closePath())},this.canvas.ontouchend=t=>{this.ctx2.drawImage(this.canvas,0,0),this.rect=null},this.canvas.onmouseup=t=>{this.ctx2.drawImage(this.canvas,0,0),this.rect=null}}drawTriangel(){this.cursorStyle("crosshair"),this.canvas.ontouchstart=t=>{this.positionMobileStart(t),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.beginPath()},this.canvas.onmousedown=t=>{this.positionStart(t),this.ctx.beginPath()},this.canvas.ontouchmove=t=>{t.preventDefault(),this.rect&&(this.positionMobileEnd(t),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.beginPath(),this.ctx.moveTo(this.rect.x1,this.rect.y0),this.ctx.lineTo(this.rect.x0,this.rect.y0),this.ctx.lineTo(this.rect.x0+.5*(this.rect.x1-this.rect.x0),this.rect.y1),this.ctx.closePath(),this.ctx.stroke())},this.canvas.onmousemove=t=>{this.rect&&(this.positionEnd(t),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.beginPath(),this.ctx.moveTo(this.rect.x1,this.rect.y0),this.ctx.lineTo(this.rect.x0,this.rect.y0),this.ctx.lineTo(this.rect.x0+.5*(this.rect.x1-this.rect.x0),this.rect.y1),this.ctx.closePath(),this.ctx.stroke())},this.canvas.ontouchend=t=>{this.ctx2.drawImage(this.canvas,0,0),this.rect=null},this.canvas.onmouseup=t=>{this.ctx2.drawImage(this.canvas,0,0),this.rect=null}}fillElement(){this.canvas.style.cursor="url('./img/Eraser.png') 2 27, auto",this.canvas.ontouchstart=t=>{this.positionMobileStart(t),this.ctx.beginPath(),this.ctx.moveTo(this.rect.x0,this.rect.y0)},this.canvas.onmousedown=t=>{this.positionStart(t),this.ctx.strokeStyle="rgb(173,216,230)",this.ctx.beginPath(),this.ctx.moveTo(this.rect.x0,this.rect.y0)},this.canvas.ontouchmove=t=>{t.preventDefault(),this.positionMobileEnd(t),this.ctx.strokeStyle="rgb(173,216,230)",this.rect&&(this.positionMobileEnd(t),this.ctx.lineTo(this.rect.x1,this.rect.y1),this.ctx.stroke())},this.canvas.onmousemove=t=>{this.rect&&(this.positionEnd(t),this.ctx.lineTo(this.rect.x1,this.rect.y1),this.ctx.stroke())},this.canvas.onmouseup=t=>{this.ctx2.drawImage(this.canvas,0,0),this.ctx.strokeStyle=this.lineColorEle.value,this.rect=null},this.canvas.ontouchend=t=>{this.ctx2.drawImage(this.canvas,0,0),this.ctx.strokeStyle=this.lineColorEle.value,this.rect=null}}clearCanvas(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx2.clearRect(0,0,this.canvas.width,this.canvas.height)}saveCnavas(){const t=this.canvas2.toDataURL("image/png").replace("image/png","image/octet-stream"),s=document.createElement("a");s.href=t,s.download="sample.png",document.body.appendChild(s),s.click(),document.body.removeChild(s)}openFile(){let t=new Image,s=new FileReader;s.onload=s=>{t.src=s.target.result,t.onload=()=>{var s=this.canvas2.width,i=this.canvas2.height,e=t.width,c=t.height;e>c?e>s&&(c*=s/e,e=s):c>i&&(e*=i/c,c=i),console.log(e,c,t.width),this.ctx2.drawImage(t,0,0,e,c)}},s.readAsDataURL(event.target.files[0])}};const c=document.querySelector('[data-js="canvas1"]'),h=document.querySelector('[data-js="canvas2"]'),a=document.querySelector('[data-js="content"]'),n=c.getContext("2d"),o=h.getContext("2d");function r(){const t=document.querySelector(".paint-bar").offsetHeight+8;a.style.height=`${window.innerHeight-t}px`,c.width=a.offsetWidth,c.height=a.offsetHeight,h.width=c.width,h.height=c.height}r(),window.addEventListener("resize",()=>{r()}),window.addEventListener("orientationchange",t=>{r()});new e(c,n,h,o)}]);